wks() {
	bspc subscribe |
		while read -r event; do
			IFS=:; set -- $event
			
			wks=" "
			while test "$1"; do
				num=${1:1}
				include=1
				case $1 in
					[OF]*) icon="$wks_foc" ;;
					[Uu]*) icon="$wks_urg" ;;
					o*)    icon="$wks_occ" ;;
					f*)    icon="$wks_free" ;;
					*)     include=0 ;;
				esac

				[[ $include -gt 0 ]] && {
					wks="$wks%{A:bspc desktop -f $num:}$icon %{A}"
				}

				shift
			done

			echo "W$wks"
		done
}

# vim: ft=sh
